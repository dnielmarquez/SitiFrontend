import{r as n,t as h,j as e,B as p,v,b as d,w as C,a as o,T as b,x as y}from"./index-e0be0293.js";import{S as w}from"./seo-8e3ecbea.js";import{u as U,C as S}from"./use-page-view-13537bfc.js";import{T,a as x,b as r,c as D}from"./TableRow-748deb72.js";import{T as A}from"./TableHead-d3cf33c3.js";import{D as N,a as E,b as k,c as I,d as B}from"./DialogTitle-e343b743.js";import{C as P}from"./Card-c99b240d.js";const R=l=>{const[c,i]=n.useState(!1),[t,a]=n.useState(null),{token:j}=h(),m=n.useMemo(()=>[...l.users].sort((s,u)=>s.verified===u.verified?0:s.verified?1:-1),[l.users]),f=s=>{a(s),i(!0)},g=async()=>{if(t)try{console.log("Approve user:",t),await C({token:j,userId:t})&&window.location.reload(),i(!1)}catch(s){alert("Error approving user"),console.log(s),i(!1)}};return e.jsxs(p,{sx:{position:"relative"},children:[e.jsx(v,{children:e.jsxs(T,{sx:{minWidth:700},children:[e.jsx(A,{children:e.jsxs(x,{children:[e.jsx(r,{children:"User Name"}),e.jsx(r,{children:"Company"}),e.jsx(r,{children:"Position"}),e.jsx(r,{children:"Email"}),e.jsx(r,{children:"Contact Number"}),e.jsx(r,{children:"Role"}),e.jsx(r,{children:"Employee Name"}),e.jsx(r,{children:"Supplier Name"}),e.jsx(r,{children:"Verified"}),e.jsx(r,{align:"right",children:"Actions"})]})}),e.jsx(D,{children:m.map(s=>e.jsxs(x,{hover:!0,children:[e.jsx(r,{children:s.name}),e.jsx(r,{children:s.companyName}),e.jsx(r,{children:s.position}),e.jsx(r,{children:s.email}),e.jsx(r,{children:s.contactNumber}),e.jsx(r,{children:s.role}),e.jsx(r,{children:s.employeeName}),e.jsx(r,{children:s.supplierName}),e.jsx(r,{children:s.verified?"Yes":"No"}),e.jsx(r,{align:"right",children:e.jsx(d,{onClick:()=>f(s.id),variant:"contained",color:"primary",disabled:!!s.verified,children:"Approve"})})]},s.id))})]})}),e.jsxs(N,{open:c,onClose:()=>i(!1),children:[e.jsx(E,{children:"Confirm User Approval"}),e.jsx(k,{children:e.jsx(I,{children:"Are you sure you want to approve this user?"})}),e.jsxs(B,{children:[e.jsx(d,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(d,{onClick:g,color:"primary",children:"Approve"})]})]})]})},M=()=>{const[l,c]=n.useState([]);n.useState(!1),n.useState("Copy to clipboard"),n.useState(!1);const{token:i}=h();return U(),n.useEffect(()=>{(async()=>{try{const a=await y(i);c(a)}catch(a){console.error("Error fetching users:",a)}})()},[i]),e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Dashboard"}),e.jsx(p,{component:"main",sx:{flexGrow:1,py:8},children:e.jsxs(S,{maxWidth:"xl",children:[e.jsx(o,{spacing:1,sx:{mb:4},children:e.jsx(o,{alignItems:"center",direction:"row-reverse",spacing:1})}),e.jsxs(o,{spacing:4,children:[e.jsxs(o,{direction:"row",justifyContent:"space-between",spacing:4,children:[e.jsx(o,{spacing:1,children:e.jsx(b,{variant:"h4",children:"Admin Dashboard"})}),e.jsx(o,{alignItems:"center",direction:"row",spacing:3})]}),e.jsx(P,{children:e.jsx(R,{users:l})})]})]})})]})};export{M as default};
