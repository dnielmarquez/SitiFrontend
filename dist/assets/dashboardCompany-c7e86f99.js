import{d as Me,j as e,y as ke,z as Se,A as fe,C as p,_ as q,D as z,r as g,E as Ne,F as Te,G as Oe,H as he,I as Z,J as Re,K as ae,M as le,N as Pe,B as S,O as je,T as A,P as C,b as G,v as Ee,a as Y,Q as be,t as We,U as Le,S as ne}from"./index-bb060518.js";import{S as Ae}from"./seo-6f431b89.js";import{u as _e,C as Ve}from"./use-page-view-7e871498.js";import{u as ze,d as qe,g as Fe,c as He}from"./requestAPI-5ffd5a58.js";import{f as me}from"./format-date-becb11b1.js";import{F as y,I as E,S as _,T as f}from"./TextField-0a23fec1.js";import{D as Ue,a as Ge,b as we,c as Be,d as Ye}from"./DialogTitle-fae74e60.js";import{T as Ke,a as ge,b as L,c as Je}from"./TableRow-91210b9a.js";import{T as Qe}from"./TableHead-47852427.js";import{C as Ze}from"./Card-cd2f62eb.js";const Xe=Me(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function ea(a){return Se("MuiChip",a)}const aa=ke("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),d=aa,la=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],ra=a=>{const{classes:l,disabled:R,size:h,color:D,iconColor:V,onDelete:N,clickable:i,variant:j}=a,T={root:["root",j,R&&"disabled",`size${p(h)}`,`color${p(D)}`,i&&"clickable",i&&`clickableColor${p(D)}`,N&&"deletable",N&&`deletableColor${p(D)}`,`${j}${p(D)}`],label:["label",`label${p(h)}`],avatar:["avatar",`avatar${p(h)}`,`avatarColor${p(D)}`],icon:["icon",`icon${p(h)}`,`iconColor${p(V)}`],deleteIcon:["deleteIcon",`deleteIcon${p(h)}`,`deleteIconColor${p(D)}`,`deleteIcon${p(j)}Color${p(D)}`]};return Re(T,ea,l)},na=fe("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,l)=>{const{ownerState:R}=a,{color:h,iconColor:D,clickable:V,onDelete:N,size:i,variant:j}=R;return[{[`& .${d.avatar}`]:l.avatar},{[`& .${d.avatar}`]:l[`avatar${p(i)}`]},{[`& .${d.avatar}`]:l[`avatarColor${p(h)}`]},{[`& .${d.icon}`]:l.icon},{[`& .${d.icon}`]:l[`icon${p(i)}`]},{[`& .${d.icon}`]:l[`iconColor${p(D)}`]},{[`& .${d.deleteIcon}`]:l.deleteIcon},{[`& .${d.deleteIcon}`]:l[`deleteIcon${p(i)}`]},{[`& .${d.deleteIcon}`]:l[`deleteIconColor${p(h)}`]},{[`& .${d.deleteIcon}`]:l[`deleteIcon${p(j)}Color${p(h)}`]},l.root,l[`size${p(i)}`],l[`color${p(h)}`],V&&l.clickable,V&&h!=="default"&&l[`clickableColor${p(h)})`],N&&l.deletable,N&&h!=="default"&&l[`deletableColor${p(h)}`],l[j],l[`${j}${p(h)}`]]}})(({theme:a,ownerState:l})=>{const R=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return q({maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${d.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${d.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:R,fontSize:a.typography.pxToRem(12)},[`& .${d.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${d.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${d.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${d.icon}`]:q({marginLeft:5,marginRight:-6},l.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},l.iconColor===l.color&&q({color:a.vars?a.vars.palette.Chip.defaultIconColor:R},l.color!=="default"&&{color:"inherit"})),[`& .${d.deleteIcon}`]:q({WebkitTapHighlightColor:"transparent",color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.26)`:z(a.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.4)`:z(a.palette.text.primary,.4)}},l.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},l.color!=="default"&&{color:a.vars?`rgba(${a.vars.palette[l.color].contrastTextChannel} / 0.7)`:z(a.palette[l.color].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[l.color].contrastText}})},l.size==="small"&&{height:24},l.color!=="default"&&{backgroundColor:(a.vars||a).palette[l.color].main,color:(a.vars||a).palette[l.color].contrastText},l.onDelete&&{[`&.${d.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:z(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},l.onDelete&&l.color!=="default"&&{[`&.${d.focusVisible}`]:{backgroundColor:(a.vars||a).palette[l.color].dark}})},({theme:a,ownerState:l})=>q({},l.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:z(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity)},[`&.${d.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:z(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},"&:active":{boxShadow:(a.vars||a).shadows[1]}},l.clickable&&l.color!=="default"&&{[`&:hover, &.${d.focusVisible}`]:{backgroundColor:(a.vars||a).palette[l.color].dark}}),({theme:a,ownerState:l})=>q({},l.variant==="outlined"&&{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${d.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${d.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${d.avatar}`]:{marginLeft:4},[`& .${d.avatarSmall}`]:{marginLeft:2},[`& .${d.icon}`]:{marginLeft:4},[`& .${d.iconSmall}`]:{marginLeft:2},[`& .${d.deleteIcon}`]:{marginRight:5},[`& .${d.deleteIconSmall}`]:{marginRight:3}},l.variant==="outlined"&&l.color!=="default"&&{color:(a.vars||a).palette[l.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[l.color].mainChannel} / 0.7)`:z(a.palette[l.color].main,.7)}`,[`&.${d.clickable}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[l.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:z(a.palette[l.color].main,a.palette.action.hoverOpacity)},[`&.${d.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[l.color].mainChannel} / ${a.vars.palette.action.focusOpacity})`:z(a.palette[l.color].main,a.palette.action.focusOpacity)},[`& .${d.deleteIcon}`]:{color:a.vars?`rgba(${a.vars.palette[l.color].mainChannel} / 0.7)`:z(a.palette[l.color].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[l.color].main}}})),ta=fe("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,l)=>{const{ownerState:R}=a,{size:h}=R;return[l.label,l[`label${p(h)}`]]}})(({ownerState:a})=>q({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},a.size==="small"&&{paddingLeft:8,paddingRight:8}));function ve(a){return a.key==="Backspace"||a.key==="Delete"}const ia=g.forwardRef(function(l,R){const h=Ne({props:l,name:"MuiChip"}),{avatar:D,className:V,clickable:N,color:i="default",component:j,deleteIcon:T,disabled:w=!1,icon:m,label:c,onClick:W,onDelete:v,onKeyDown:K,onKeyUp:M,size:X="medium",variant:ee="filled",tabIndex:J,skipFocusWhenDisabled:Q=!1}=h,r=Te(h,la),s=g.useRef(null),x=Oe(s,R),$=I=>{I.stopPropagation(),v&&v(I)},k=I=>{I.currentTarget===I.target&&ve(I)&&I.preventDefault(),K&&K(I)},n=I=>{I.currentTarget===I.target&&(v&&ve(I)?v(I):I.key==="Escape"&&s.current&&s.current.blur()),M&&M(I)},u=N!==!1&&W?!0:N,b=u||v?he:j||"div",P=q({},h,{component:b,disabled:w,size:X,color:i,iconColor:g.isValidElement(m)&&m.props.color||i,onDelete:!!v,clickable:u,variant:ee}),O=ra(P),B=b===he?q({component:j||"div",focusVisibleClassName:O.focusVisible},v&&{disableRipple:!0}):{};let F=null;v&&(F=T&&g.isValidElement(T)?g.cloneElement(T,{className:Z(T.props.className,O.deleteIcon),onClick:$}):e.jsx(Xe,{className:Z(O.deleteIcon),onClick:$}));let H=null;D&&g.isValidElement(D)&&(H=g.cloneElement(D,{className:Z(O.avatar,D.props.className)}));let U=null;return m&&g.isValidElement(m)&&(U=g.cloneElement(m,{className:Z(O.icon,m.props.className)})),e.jsxs(na,q({as:b,className:Z(O.root,V),disabled:u&&w?!0:void 0,onClick:W,onKeyDown:k,onKeyUp:n,ref:x,tabIndex:Q&&w?-1:J,ownerState:P},B,r,{children:[H||U,e.jsx(ta,{className:Z(O.label),ownerState:P,children:c}),F]}))}),re=ia;var te={},sa=le;Object.defineProperty(te,"__esModule",{value:!0});var Ce=te.default=void 0,oa=sa(ae()),ca=e,da=(0,oa.default)((0,ca.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");Ce=te.default=da;var ie={},ua=le;Object.defineProperty(ie,"__esModule",{value:!0});var ye=ie.default=void 0,pa=ua(ae()),xa=e,ha=(0,pa.default)((0,xa.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");ye=ie.default=ha;const ma=a=>{var J,Q;const l={id:"",createdByUserId:"",productName:"VAULT",productRequirements:"",process:[],assignedSupplierIds:[],assignmentDate:"",dueDate:"",createdAt:"",updatedAt:""},R=Pe(),[h,D]=g.useState(!1),[V,N]=g.useState(!1),[i,j]=g.useState(null),[T,w]=g.useState([]),[m,c]=g.useState([]);g.useEffect(()=>{(async()=>{try{const s=await be();w(s)}catch(s){console.error("Error fetching suppliers:",s)}})()},[]);const W=async()=>{if(i&&i.id)try{let r={...i};r.assignmentDate=r.assignmentDate?new Date(r.assignmentDate).toISOString():null,r.dueDate=r.dueDate?new Date(r.dueDate).toISOString():null;const s={};m.forEach(x=>{s[x.name]=x.value}),r.productRequirements=JSON.stringify(s),console.log("OBJSENT",r),console.log("data to send",r),await ze(i.id,r),D(!1)}catch(r){console.error("Error updating request:",r)}},v=(r,s)=>{const x=[...m],$=x.findIndex(k=>k.name===r);$!==-1?x[$].value=s:x.push({name:r,value:s}),c(x)},K=r=>{var x;const s=a.requests.find($=>$.id===r);if(s){j({...s,assignedSupplierIds:(x=s.assignedSuppliers)==null?void 0:x.map(k=>k.id)});const $=s.productRequirements;console.log("REQUEST TO EDIT",JSON.parse($));try{const k=JSON.parse($||"{}"),n=Object.entries(k).map(([u,b])=>({name:u,value:b}));c(n)}catch(k){console.error("Error parsing productRequirements:",k)}D(!0)}},M=async()=>{if(i&&i.id)try{await qe(i.id),N(!1),window.location.reload()}catch(r){console.error("Error deleting request:",r)}},X=r=>{const s=a.requests.find(x=>x.id===r);s&&j({...s}),N(!0)},ee=()=>{const r=(i==null?void 0:i.process)||[];if(r.length===0)return null;const s=[];return r.forEach(x=>{var $,k,n,u,b,P,O,B,F,H,U,I;switch(x){case"MACHINING":s.push(e.jsxs("div",{children:[e.jsx(A,{variant:"h5",children:"Machining Requirements:"}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Scratches"}),e.jsxs(_,{value:(($=m.find(t=>t.name==="Scratches"))==null?void 0:$.value)||"",onChange:t=>v("Scratches",t.target.value),children:[e.jsx(C,{value:"Yes",children:"Yes"}),e.jsx(C,{value:"No",children:"No"})]})]})}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Dented"}),e.jsxs(_,{value:((k=m.find(t=>t.name==="Dented"))==null?void 0:k.value)||"",onChange:t=>v("Dented",t.target.value),children:[e.jsx(C,{value:"Yes",children:"Yes"}),e.jsx(C,{value:"No",children:"No"})]})]})}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs("div",{children:[e.jsx(A,{variant:"subtitle1",children:"Length Range (mm):"}),e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"Length Min (mm)",type:"number",value:((n=m.find(t=>t.name==="LengthMin"))==null?void 0:n.value)||"",onChange:t=>v("LengthMin",t.target.value),sx:{flex:1}}),e.jsx(f,{label:"Length Max (mm)",type:"number",value:((u=m.find(t=>t.name==="LengthMax"))==null?void 0:u.value)||"",onChange:t=>v("LengthMax",t.target.value),sx:{flex:1}})]})]})})}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs("div",{children:[e.jsx(A,{variant:"subtitle1",children:"OD Range (mm):"}),e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"OD Min (mm)",type:"number",value:((b=m.find(t=>t.name==="ODMin"))==null?void 0:b.value)||"",onChange:t=>v("ODMin",t.target.value),sx:{flex:1}}),e.jsx(f,{label:"OD Max (mm)",type:"number",value:((P=m.find(t=>t.name==="ODMax"))==null?void 0:P.value)||"",onChange:t=>v("ODMax",t.target.value),sx:{flex:1}})]})]})})}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs("div",{children:[e.jsx(A,{variant:"subtitle1",children:"ID Range (mm):"}),e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"ID Min (mm)",type:"number",value:((O=m.find(t=>t.name==="IDMin"))==null?void 0:O.value)||"",onChange:t=>v("IDMin",t.target.value),sx:{flex:1}}),e.jsx(f,{label:"ID Max (mm)",type:"number",value:((B=m.find(t=>t.name==="IDMax"))==null?void 0:B.value)||"",onChange:t=>v("IDMax",t.target.value),sx:{flex:1}})]})]})})})]},"machining-fields"));break;case"COATING":s.push(e.jsxs("div",{children:[e.jsx(A,{variant:"h5",children:"Coating Requirements:"}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"Thickness Min (micron)",type:"number",value:((F=m.find(t=>t.name==="ThicknessMin"))==null?void 0:F.value)||"",onChange:t=>v("ThicknessMin",t.target.value),sx:{flex:1}}),e.jsx(f,{label:"Thickness Max (micron)",type:"number",value:((H=m.find(t=>t.name==="ThicknessMax"))==null?void 0:H.value)||"",onChange:t=>v("ThicknessMax",t.target.value),sx:{flex:1}})]})})}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Porosity"}),e.jsxs(_,{value:((U=m.find(t=>t.name==="Porosity"))==null?void 0:U.value)||"",onChange:t=>v("Porosity",t.target.value),children:[e.jsx(C,{value:"Yes",children:"Yes"}),e.jsx(C,{value:"No",children:"No"})]})]})})]},"coating-fields"));break;case"MACHINING_COATING":s.push(e.jsxs("div",{children:[e.jsx(A,{variant:"subtitle1",children:"Machining and Coating Requirements:"}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Combined Requirement"}),e.jsx(f,{type:"text",value:((I=m.find(t=>t.name==="Combined Requirement"))==null?void 0:I.value)||"",onChange:t=>v("Combined Requirement",t.target.value)})]})})]},"machining-coating-fields"));break}}),s};return e.jsxs(S,{sx:{position:"relative"},children:[e.jsx(je,{open:h,onClose:()=>D(!1),"aria-labelledby":"edit-request-modal","aria-describedby":"edit-request-modal-description",children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,maxWidth:"90vw",maxHeight:"80vh",overflowY:"auto",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsx(A,{id:"edit-request-modal",variant:"h6",component:"h2",children:"Edit Order"}),e.jsxs(S,{component:"form",noValidate:!0,autoComplete:"off",sx:{mt:2},children:[e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},id:"product-name-label",children:"Product Name"}),e.jsxs(_,{labelId:"product-name-label",id:"productName",value:(i==null?void 0:i.productName)||l.productName,label:"Product Name",onChange:r=>j({...l,...i,productName:r.target.value}),children:[e.jsx(C,{value:"VAULT",children:"VAULT"}),e.jsx(C,{value:"COVER",children:"COVER"})]})]}),e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},id:"process-label",children:"Process"}),e.jsxs(_,{labelId:"process-label",id:"process",multiple:!0,value:(i==null?void 0:i.process)||[],onChange:r=>j({...i||l,process:r.target.value}),renderValue:r=>e.jsx(S,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:(i==null?void 0:i.process)&&i.process.map(s=>e.jsx(re,{label:s},s))}),children:[e.jsx(C,{value:"MACHINING",children:"MACHINING"},"machining"),e.jsx(C,{value:"COATING",children:"COATING"},"coating")]})]}),ee(),e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},id:"suppliers-label",children:"Assigned Suppliers"}),e.jsx(_,{labelId:"suppliers-label",id:"assignedSuppliers",multiple:!0,value:(i==null?void 0:i.assignedSupplierIds)||[],onChange:r=>j({...i||l,assignedSupplierIds:r.target.value}),renderValue:r=>e.jsx(S,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:r.map(s=>{const x=T.find($=>$.id===s);return e.jsx(re,{label:(x==null?void 0:x.supplierName)||""},s)})}),children:T.map(r=>e.jsx(C,{value:r.id,children:r.supplierName},r.id))})]}),e.jsx(f,{margin:"normal",required:!0,fullWidth:!0,id:"assignmentDate",label:"Assignment Date",name:"assignmentDate",type:"date",value:((J=i==null?void 0:i.assignmentDate)==null?void 0:J.split("T")[0])||"",onChange:r=>j({...i||l,assignmentDate:r.target.value}),InputLabelProps:{shrink:!0}}),e.jsx(f,{margin:"normal",required:!0,fullWidth:!0,id:"dueDate",label:"Due Date",name:"dueDate",type:"date",value:((Q=i==null?void 0:i.dueDate)==null?void 0:Q.split("T")[0])||"",onChange:r=>j({...i||l,dueDate:r.target.value}),InputLabelProps:{shrink:!0}}),e.jsx(G,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:W,children:"Save"})]})]})}),e.jsxs(Ue,{open:V,onClose:()=>N(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(Ge,{id:"alert-dialog-title",children:"Delete Order"}),e.jsx(we,{children:e.jsx(Be,{id:"alert-dialog-description",children:"Are you sure you want to delete this order?"})}),e.jsxs(Ye,{children:[e.jsx(G,{onClick:()=>N(!1),children:"Cancel"}),e.jsx(G,{onClick:M,autoFocus:!0,color:"error",children:"Delete"})]})]}),e.jsx(Ee,{children:e.jsxs(Ke,{sx:{minWidth:700},children:[e.jsx(Qe,{children:e.jsxs(ge,{children:[e.jsx(L,{children:"Product Name"}),e.jsx(L,{children:"Process"}),e.jsx(L,{children:"Due Date"}),e.jsx(L,{children:"Assignment Date"}),e.jsx(L,{children:"Status"}),e.jsx(L,{align:"right",children:"Actions"})]})}),e.jsx(Je,{children:a.requests.map(r=>{var s;return e.jsxs(ge,{hover:!0,children:[e.jsx(L,{children:r.productName}),e.jsx(L,{children:r.process&&((s=r.process)==null?void 0:s.map((x,$)=>{var k=x;return r.process&&$<r.process.length-1&&(k+=", "),k}))}),e.jsx(L,{children:r.dueDate&&me(r.dueDate)}),e.jsx(L,{children:r.assignmentDate&&me(r.assignmentDate)}),e.jsx(L,{children:r.status}),e.jsx(L,{align:"right",children:e.jsxs(Y,{direction:"row",spacing:1,children:[r.status=="ReadyForReview"&&e.jsxs(e.Fragment,{children:[e.jsx(G,{startIcon:e.jsx(Ce,{}),onClick:()=>K(r.id||""),variant:"contained",children:"Edit"}),e.jsx(G,{startIcon:e.jsx(ye,{}),onClick:()=>X(r.id),variant:"contained",color:"error",children:"Delete"})]}),(r.status=="Accepted"||r.status=="Rejected"||r.status=="AcceptAsIs")&&e.jsx(e.Fragment,{children:e.jsx(G,{onClick:()=>{var x;return R("/company/requestSummary/"+((x=r.id)==null?void 0:x.toString()))},variant:"contained",children:"Check Review"})})]})})]},r.id)})})]})})]})};var se={},ga=le;Object.defineProperty(se,"__esModule",{value:!0});var De=se.default=void 0,va=ga(ae()),fa=e,ja=(0,va.default)((0,fa.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");De=se.default=ja;var oe={},ba=le;Object.defineProperty(oe,"__esModule",{value:!0});var Ie=oe.default=void 0,Ca=ba(ae()),ya=e,Da=(0,Ca.default)((0,ya.jsx)("path",{d:"M18 4H6C3.79 4 2 5.79 2 8v8c0 2.21 1.79 4 4 4h12c2.21 0 4-1.79 4-4V8c0-2.21-1.79-4-4-4zm-1.86 9.77c-.24.2-.57.28-.88.2L4.15 11.25C4.45 10.52 5.16 10 6 10h12c.67 0 1.26.34 1.63.84l-3.49 2.93zM6 6h12c1.1 0 2 .9 2 2v.55c-.59-.34-1.27-.55-2-.55H6c-.73 0-1.41.21-2 .55V8c0-1.1.9-2 2-2z"}),"Wallet");Ie=oe.default=Da;var ce={},Ia=le;Object.defineProperty(ce,"__esModule",{value:!0});var $e=ce.default=void 0,$a=Ia(ae()),Ma=e,ka=(0,$a.default)((0,Ma.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");$e=ce.default=ka;const _a=()=>{var $,k;const a={createdByUserId:"",productName:"VAULT",quantity:0,productRequirements:"",process:[],assignedSupplierIds:[],assignmentDate:"",dueDate:""},[l,R]=g.useState([]),[h,D]=g.useState(!1),[V,N]=g.useState("Copy to clipboard"),[i,j]=g.useState(!1),{userId:T}=We(),[w,m]=g.useState(!1),[c,W]=g.useState(a),[v,K]=g.useState([]);_e(),g.useEffect(()=>{const n=async()=>{try{const u=await be();K(u)}catch(u){console.error("Error fetching suppliers:",u)}};console.log("COMPANY",T),n()},[]),g.useEffect(()=>{l.length===0&&T&&r()},[T]);const[M,X]=g.useState([]),ee=()=>{W(a),m(!0)},J=async()=>{try{let n={...c};n.assignmentDate=n.assignmentDate?n.assignmentDate+"T00:00:00.000Z":null,n.dueDate=n.dueDate?n.dueDate+"T00:00:00.000Z":null;const u={};M.forEach(b=>{u[b.name]=b.value}),n.createdByUserId=T,n.productRequirements=JSON.stringify(u),console.log("OBJSENT",n),await He(n),m(!1),r()}catch(n){console.error("Error creating new order:",n)}},Q=()=>{N("Card copied!"),D(!0),setTimeout(()=>{D(!1),setTimeout(()=>N("Copy to clipboard"),500)},2e3)},r=async()=>{try{console.log("SENDING",T);const n=await Fe(T);R(n)}catch(n){console.error("Error fetching orders",n)}},s=(n,u)=>{const b=[...M],P=b.findIndex(O=>O.name===n);P!==-1?b[P].value=u:b.push({name:n,value:u}),X(b)},x=()=>{const n=(c==null?void 0:c.process)||[];if(n.length===0)return null;const u=[];return n.forEach(b=>{var P,O,B,F,H,U,I,t,de,ue,pe,xe;switch(b){case"MACHINING":u.push(e.jsxs("div",{children:[e.jsx(A,{variant:"h5",children:"Machining Requirements:"}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Scratches"}),e.jsxs(_,{value:((P=M.find(o=>o.name==="Scratches"))==null?void 0:P.value)||"",onChange:o=>s("Scratches",o.target.value),children:[e.jsx(C,{value:"true",children:"Yes"}),e.jsx(C,{value:"false",children:"No"})]})]})}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Dented"}),e.jsxs(_,{value:((O=M.find(o=>o.name==="Dented"))==null?void 0:O.value)||"",onChange:o=>s("Dented",o.target.value),children:[e.jsx(C,{value:"true",children:"Yes"}),e.jsx(C,{value:"false",children:"No"})]})]})}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"Length Min (mm)",type:"number",value:((B=M.find(o=>o.name==="LengthMin"))==null?void 0:B.value)||"",onChange:o=>s("LengthMin",o.target.value),sx:{flex:1}}),e.jsx(f,{label:"Length Max (mm)",type:"number",value:((F=M.find(o=>o.name==="LengthMax"))==null?void 0:F.value)||"",onChange:o=>s("LengthMax",o.target.value),sx:{flex:1}})]})})}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"OD Min (mm)",type:"number",value:((H=M.find(o=>o.name==="ODMin"))==null?void 0:H.value)||"",onChange:o=>s("ODMin",o.target.value),sx:{flex:1}}),e.jsx(f,{label:"OD Max (mm)",type:"number",value:((U=M.find(o=>o.name==="ODMax"))==null?void 0:U.value)||"",onChange:o=>s("ODMax",o.target.value),sx:{flex:1}})]})})}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"ID Min (mm)",type:"number",value:((I=M.find(o=>o.name==="IDMin"))==null?void 0:I.value)||"",onChange:o=>s("IDMin",o.target.value),sx:{flex:1}}),e.jsx(f,{label:"ID Max (mm)",type:"number",value:((t=M.find(o=>o.name==="IDMax"))==null?void 0:t.value)||"",onChange:o=>s("IDMax",o.target.value),sx:{flex:1}})]})})})]},"machining-fields"));break;case"COATING":u.push(e.jsxs("div",{children:[e.jsx(A,{variant:"h5",children:"Coating Requirements:"}),e.jsx("div",{children:e.jsx(y,{fullWidth:!0,margin:"normal",children:e.jsxs(S,{display:"flex",gap:2,children:[e.jsx(f,{label:"Thickness Min (micron)",type:"number",value:((de=M.find(o=>o.name==="ThicknessMin"))==null?void 0:de.value)||"",onChange:o=>s("ThicknessMin",o.target.value),sx:{flex:1}}),e.jsx(f,{label:"Thickness Max (micron)",type:"number",value:((ue=M.find(o=>o.name==="ThicknessMax"))==null?void 0:ue.value)||"",onChange:o=>s("ThicknessMax",o.target.value),sx:{flex:1}})]})})}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Porosity"}),e.jsxs(_,{value:((pe=M.find(o=>o.name==="Porosity"))==null?void 0:pe.value)||"",onChange:o=>s("Porosity",o.target.value),children:[e.jsx(C,{value:"true",children:"Yes"}),e.jsx(C,{value:"false",children:"No"})]})]})})]},"coating-fields"));break;case"MACHINING_COATING":u.push(e.jsxs("div",{children:[e.jsx(A,{variant:"subtitle1",children:"Machining and Coating Requirements:"}),e.jsx("div",{children:e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},shrink:!0,children:"Combined Requirement"}),e.jsx(f,{type:"text",value:((xe=M.find(o=>o.name==="Combined Requirement"))==null?void 0:xe.value)||"",onChange:o=>s("Combined Requirement",o.target.value)})]})})]},"machining-coating-fields"));break}}),u};return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{title:"Dashboard"}),e.jsxs(S,{component:"main",sx:{flexGrow:1,py:8},children:[e.jsx(je,{open:w,onClose:()=>m(!1),"aria-labelledby":"create-request-modal","aria-describedby":"create-request-modal-description",children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,maxWidth:"90vw",maxHeight:"80vh",overflowY:"auto",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsx(A,{id:"edit-request-modal",variant:"h6",component:"h2",children:"Create New Order"}),e.jsxs(S,{component:"form",noValidate:!0,autoComplete:"off",sx:{mt:2},children:[e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},id:"product-name-label",children:"Product Name"}),e.jsxs(_,{labelId:"product-name-label",id:"productName",value:(c==null?void 0:c.productName)||a.productName,label:"Product Name",onChange:n=>W({...a,...c,productName:n.target.value}),children:[e.jsx(C,{value:"VAULT",children:"VAULT"}),e.jsx(C,{value:"COVER",children:"COVER"})]})]}),e.jsx(f,{label:"Quantity",type:"number",value:c==null?void 0:c.quantity,onChange:n=>W({...a,...c,quantity:Number(n.target.value)}),sx:{flex:1}}),e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},id:"process-label",children:"Process"}),e.jsxs(_,{labelId:"process-label",id:"process",multiple:!0,value:(c==null?void 0:c.process)||[],onChange:n=>W({...c||a,process:n.target.value}),renderValue:n=>e.jsx(S,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:c.process&&c.process.map(u=>e.jsx(re,{label:u},u))}),children:[e.jsx(C,{value:"MACHINING",children:"MACHINING"},"machining"),e.jsx(C,{value:"COATING",children:"COATING"},"coating")]})]}),x(),e.jsxs(y,{fullWidth:!0,margin:"normal",children:[e.jsx(E,{sx:{mt:-1},id:"suppliers-label",children:"Assigned Suppliers"}),e.jsx(_,{labelId:"suppliers-label",id:"assignedSuppliers",multiple:!0,value:(c==null?void 0:c.assignedSupplierIds)||[],onChange:n=>W({...c||a,assignedSupplierIds:n.target.value}),renderValue:n=>e.jsx(S,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:n.map(u=>{const b=v.find(P=>P.id===u);return e.jsx(re,{label:(b==null?void 0:b.supplierName)||""},u)})}),children:v.map(n=>e.jsx(C,{value:n.id,children:n.supplierName},n.id))})]}),e.jsx(f,{margin:"normal",required:!0,fullWidth:!0,id:"assignmentDate",label:"Assignment Date",name:"assignmentDate",type:"date",value:(($=c==null?void 0:c.assignmentDate)==null?void 0:$.split("T")[0])||"",onChange:n=>W({...c||a,assignmentDate:n.target.value}),InputLabelProps:{shrink:!0}}),e.jsx(f,{margin:"normal",required:!0,fullWidth:!0,id:"dueDate",label:"Due Date",name:"dueDate",type:"date",value:((k=c==null?void 0:c.dueDate)==null?void 0:k.split("T")[0])||"",onChange:n=>W({...c||a,dueDate:n.target.value}),InputLabelProps:{shrink:!0}}),e.jsx(G,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:J,children:"Create"})]})]})}),e.jsxs(Ve,{maxWidth:"xl",children:[e.jsx(Y,{spacing:1,sx:{mb:4},children:e.jsxs(Y,{alignItems:"center",direction:"row-reverse",spacing:1,children:[e.jsx(Le,{title:V,open:h,placement:"top",children:e.jsx(ne,{sx:{cursor:"pointer",transition:"transform 0.1s",transform:i?"scale(0.9)":"scale(1)"},onClick:Q,onMouseDown:()=>j(!0),onMouseUp:()=>j(!1),onMouseLeave:()=>j(!1),children:e.jsx($e,{})})}),e.jsx(ne,{children:e.jsx(Ie,{})})]})}),e.jsxs(Y,{spacing:4,children:[e.jsxs(Y,{direction:"row",justifyContent:"space-between",spacing:4,children:[e.jsx(Y,{spacing:1,children:e.jsx(A,{variant:"h4",children:"Company Dashboard"})}),e.jsx(Y,{alignItems:"center",direction:"row",spacing:3,children:e.jsx(G,{startIcon:e.jsx(ne,{children:e.jsx(De,{})}),variant:"contained",onClick:ee,children:"New Order"})})]}),e.jsx(Ze,{children:e.jsx(ma,{requests:l})})]})]})]})]})};export{_a as default};
