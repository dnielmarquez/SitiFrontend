import{N as g,r as t,j as s,B as j,v as S,a as l,b as h,Q as f,t as b,T as y}from"./index-bb060518.js";import{S as C}from"./seo-6f431b89.js";import{u as w,C as A}from"./use-page-view-7e871498.js";import{g as D}from"./requestAPI-5ffd5a58.js";import{f as m}from"./format-date-becb11b1.js";import{T,a as u,b as a,c as v}from"./TableRow-91210b9a.js";import{T as k}from"./TableHead-47852427.js";import{C as E}from"./Card-cd2f62eb.js";const R=d=>{const p=g();t.useState(!1),t.useState(!1),t.useState(null);const[x,r]=t.useState([]);return t.useState([]),t.useEffect(()=>{(async()=>{try{const n=await f();r(n)}catch(n){console.error("Error fetching suppliers:",n)}})()},[]),s.jsx(j,{sx:{position:"relative"},children:s.jsx(S,{children:s.jsxs(T,{sx:{minWidth:700},children:[s.jsx(k,{children:s.jsxs(u,{children:[s.jsx(a,{children:"Product Name"}),s.jsx(a,{children:"Process"}),s.jsx(a,{children:"Due Date"}),s.jsx(a,{children:"Assignment Date"}),s.jsx(a,{children:"Status"}),s.jsx(a,{align:"right",children:"Actions"})]})}),s.jsx(v,{children:d.requests.filter(e=>e.status==="Accepted"||e.status==="AcceptAsIs").map(e=>{var n;return s.jsxs(u,{hover:!0,children:[s.jsx(a,{children:e.productName}),s.jsx(a,{children:e.process&&((n=e.process)==null?void 0:n.map((c,i)=>{var o=c;return e.process&&i<e.process.length-1&&(o+=", "),o}))}),s.jsx(a,{children:e.dueDate&&m(e.dueDate)}),s.jsx(a,{children:e.assignmentDate&&m(e.assignmentDate)}),s.jsx(a,{children:e.status}),s.jsx(a,{align:"right",children:s.jsx(l,{direction:"row",spacing:1,children:(e.status=="Accepted"||e.status=="AcceptAsIs")&&s.jsxs(s.Fragment,{children:[s.jsx(h,{onClick:()=>{var c;return p("/company/requestSummary/"+((c=e.id)==null?void 0:c.toString()))},variant:"contained",children:"Check Review"}),(e==null?void 0:e.blockchainTx)&&s.jsx(s.Fragment,{children:s.jsx(h,{variant:"contained",sx:{ml:2},onClick:()=>window.open("https://testnet.bscscan.com/tx/"+e.blockchainTx,"_blank"),children:"See tx on Blockchain"})}),(e==null?void 0:e.fileOnchainHash)&&s.jsx(h,{variant:"contained",sx:{ml:2},onClick:()=>window.open("https://ipfs.io/ipfs/"+e.fileOnchainHash,"_blank"),children:"See PDF"})]})})})]},e.id)})})]})})})},V=()=>{const d={createdByUserId:"",productName:"VAULT",productRequirements:"",process:[],assignedSupplierIds:[],assignmentDate:"",dueDate:""},[p,x]=t.useState([]);t.useState(!1),t.useState("Copy to clipboard"),t.useState(!1);const{userId:r}=b();t.useState(!1),t.useState(d);const[e,n]=t.useState([]);w(),t.useEffect(()=>{const i=async()=>{try{const o=await f();n(o)}catch(o){console.error("Error fetching suppliers:",o)}};console.log("COMPANY",r),i()},[]),t.useEffect(()=>{p.length===0&&r&&c()},[r]),t.useState([]);const c=async()=>{try{console.log("SENDING",r);const i=await D(r);x(i)}catch(i){console.error("Error fetching orders",i)}};return s.jsxs(s.Fragment,{children:[s.jsx(C,{title:"Dashboard"}),s.jsx(j,{component:"main",sx:{flexGrow:1,py:8},children:s.jsxs(A,{maxWidth:"xl",children:[s.jsx(l,{spacing:1,sx:{mb:4}}),s.jsxs(l,{spacing:4,children:[s.jsx(l,{direction:"row",justifyContent:"space-between",spacing:4,children:s.jsx(l,{spacing:1,children:s.jsx(y,{variant:"h4",children:"Completed Orders"})})}),s.jsx(E,{children:s.jsx(R,{requests:p})})]})]})})]})};export{V as default};
