import{N as g,r as a,j as s,B as j,v as S,a as l,b as h,Q as f,t as b,T as y}from"./index-b1fd94f3.js";import{S as w}from"./seo-3cbafadc.js";import{u as C,C as D}from"./use-page-view-fa399662.js";import{g as T}from"./requestAPI-127e1f42.js";import{f as u}from"./format-date-becb11b1.js";import{T as R,a as m,b as t,c as v}from"./TableRow-06e70a1e.js";import{T as k}from"./TableHead-2cc8d31c.js";import{C as E}from"./Card-a683e63d.js";const A=d=>{const p=g();a.useState(!1),a.useState(!1),a.useState(null);const[x,n]=a.useState([]);return a.useState([]),a.useEffect(()=>{(async()=>{try{const r=await f();n(r)}catch(r){console.error("Error fetching suppliers:",r)}})()},[]),s.jsx(j,{sx:{position:"relative"},children:s.jsx(S,{children:s.jsxs(R,{sx:{minWidth:700},children:[s.jsx(k,{children:s.jsxs(m,{children:[s.jsx(t,{children:"Product Name"}),s.jsx(t,{children:"Process"}),s.jsx(t,{children:"Due Date"}),s.jsx(t,{children:"Assignment Date"}),s.jsx(t,{children:"Status"}),s.jsx(t,{align:"right",children:"Actions"})]})}),s.jsx(v,{children:d.requests.filter(e=>e.status==="Repair").map(e=>{var r;return s.jsxs(m,{hover:!0,children:[s.jsx(t,{children:e.productName}),s.jsx(t,{children:e.process&&((r=e.process)==null?void 0:r.map((c,i)=>{var o=c;return e.process&&i<e.process.length-1&&(o+=", "),o}))}),s.jsx(t,{children:e.dueDate&&u(e.dueDate)}),s.jsx(t,{children:e.assignmentDate&&u(e.assignmentDate)}),s.jsx(t,{children:e.status}),s.jsx(t,{align:"right",children:s.jsx(l,{direction:"row",spacing:1,children:e.status=="Repair"&&s.jsxs(s.Fragment,{children:[s.jsx(h,{onClick:()=>{var c;return p("/company/requestSummary/"+((c=e.id)==null?void 0:c.toString()))},variant:"contained",children:"Check Review"}),(e==null?void 0:e.blockchainTx)&&s.jsx(s.Fragment,{children:s.jsx(h,{variant:"contained",sx:{ml:2},onClick:()=>window.open("https://testnet.bscscan.com/tx/"+e.blockchainTx,"_blank"),children:"See tx on Blockchain"})}),(e==null?void 0:e.fileOnchainHash)&&s.jsx(h,{variant:"contained",sx:{ml:2},onClick:()=>window.open("https://ipfs.io/ipfs/"+e.fileOnchainHash,"_blank"),children:"See PDF"})]})})})]},e.id)})})]})})})},V=()=>{const d={createdByUserId:"",productName:"VAULT",productRequirements:"",process:[],assignedSupplierIds:[],assignmentDate:"",dueDate:""},[p,x]=a.useState([]);a.useState(!1),a.useState("Copy to clipboard"),a.useState(!1);const{userId:n}=b();a.useState(!1),a.useState(d);const[e,r]=a.useState([]);C(),a.useEffect(()=>{const i=async()=>{try{const o=await f();r(o)}catch(o){console.error("Error fetching suppliers:",o)}};console.log("COMPANY",n),i()},[]),a.useEffect(()=>{p.length===0&&n&&c()},[n]),a.useState([]);const c=async()=>{try{console.log("SENDING",n);const i=await T(n);x(i)}catch(i){console.error("Error fetching orders",i)}};return s.jsxs(s.Fragment,{children:[s.jsx(w,{title:"Dashboard"}),s.jsx(j,{component:"main",sx:{flexGrow:1,py:8},children:s.jsxs(D,{maxWidth:"xl",children:[s.jsx(l,{spacing:1,sx:{mb:4}}),s.jsxs(l,{spacing:4,children:[s.jsx(l,{direction:"row",justifyContent:"space-between",spacing:4,children:s.jsx(l,{spacing:1,children:s.jsx(y,{variant:"h4",children:"Orders to repair"})})}),s.jsx(E,{children:s.jsx(A,{requests:p})})]})]})})]})};export{V as default};
